*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

:root {
  --c-bg:          #0b0917;
  --c-card:        rgba(80, 30, 130, 0.13);
  --c-border:      rgba(180, 140, 255, 0.18);
  --c-border-hover:rgba(180, 140, 255, 0.38);
  --c-accent:      #9d67ff;
  --c-accent2:     #c084fc;
  --c-text:        #f0e6ff;
  --c-muted:       #b09fd0;
  --c-dim:         #7a6a9a;
  --blur:          22px;
}

html, body { width: 100%; height: 100%; overflow: hidden; user-select: none; -webkit-user-select: none; }

body {
  font-family: 'Work Sans', sans-serif;
  background: var(--c-bg);
  color: var(--c-text);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100svh;
  position: relative;
}

/* ── BACKGROUND IMAGE ───────────────────────────────── */
#bg-img {
  position: fixed; inset: 0; z-index: -1; pointer-events: none;
  background: url('src/background.jpg') center / cover no-repeat;
  filter: brightness(0.35) blur(1px);
}

/* ── BACKGROUND ─────────────────────────────────────── */
#bg {
  position: fixed; inset: 0; z-index: 0; pointer-events: none;
  background:
    radial-gradient(ellipse 60% 50% at 15% 15%, rgba(100,40,180,.28) 0%, transparent 60%),
    radial-gradient(ellipse 50% 40% at 85% 80%, rgba(60,50,200,.22) 0%, transparent 60%),
    radial-gradient(ellipse 70% 60% at 50% 50%, rgba(20,8,50,.72) 0%, transparent 100%),
    linear-gradient(160deg, rgba(11,9,23,.82) 0%, rgba(18,9,38,.82) 50%, rgba(9,13,31,.82) 100%);
  animation: bgPulse 12s ease-in-out infinite alternate;
}
@keyframes bgPulse {
  from { filter: hue-rotate(0deg);  }
  to   { filter: hue-rotate(20deg); }
}

/* orbs */
.orb {
  position: fixed; border-radius: 50%;
  filter: blur(70px); pointer-events: none; z-index: 0;
}
.orb-a {
  width: 500px; height: 500px;
  background: radial-gradient(circle, rgba(100,30,200,.22) 0%, transparent 70%);
  top: -160px; left: -160px;
  animation: o1 14s ease-in-out infinite alternate;
}
.orb-b {
  width: 380px; height: 380px;
  background: radial-gradient(circle, rgba(55,40,210,.18) 0%, transparent 70%);
  bottom: -120px; right: -100px;
  animation: o2 11s ease-in-out infinite alternate;
}
.orb-c {
  width: 240px; height: 240px;
  background: radial-gradient(circle, rgba(160,60,240,.15) 0%, transparent 70%);
  top: 45%; right: 8%;
  animation: o3 9s ease-in-out infinite alternate;
}
@keyframes o1 { to { transform: translate(60px, 40px) scale(1.12); } }
@keyframes o2 { to { transform: translate(-40px,-25px) scale(1.08); } }
@keyframes o3 { to { transform: translate(-35px, 30px) scale(1.18); } }

/* noise overlay */
#noise {
  position: fixed; inset: 0; z-index: 1; pointer-events: none; opacity: .025;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
  background-size: 200px 200px;
}

/* particles */
#pts { position: fixed; inset: 0; z-index: 1; pointer-events: none; overflow: hidden; }
.pt {
  position: absolute;
  border-radius: 50%;
  background: rgba(180,140,255,.55);
  animation: ptRise linear infinite;
}
@keyframes ptRise {
  0%   { transform: translateY(105vh) rotate(0deg);  opacity: 0; }
  8%   { opacity: 1; }
  92%  { opacity: .8; }
  100% { transform: translateY(-8vh) rotate(540deg); opacity: 0; }
}

/* ── TOAST ──────────────────────────────────────────── */
#toast {
  position: fixed; bottom: 96px; left: 50%; z-index: 600;
  transform: translateX(-50%) translateY(12px);
  background: rgba(14,6,34,.94);
  border: 1px solid var(--c-border);
  backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
  color: var(--c-text); font-family: 'Outfit', sans-serif;
  font-size: 13px; font-weight: 600; letter-spacing: .3px;
  padding: 9px 22px; border-radius: 100px;
  opacity: 0; pointer-events: none;
  transition: opacity 220ms ease, transform 220ms ease;
}
#toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }

/* ── VOLUME BTN ─────────────────────────────────────── */
#volBtn {
  position: fixed; top: 18px; left: 18px; z-index: 200;
  width: 44px; height: 44px; border-radius: 13px;
  background: rgba(80,30,130,.35); border: 1px solid var(--c-border);
  backdrop-filter: blur(14px); -webkit-backdrop-filter: blur(14px);
  display: flex; align-items: center; justify-content: center;
  cursor: pointer; color: var(--c-muted);
  transition: background 200ms, border-color 200ms, box-shadow 200ms, color 200ms;
}
#volBtn:hover {
  background: rgba(100,40,170,.5); border-color: var(--c-border-hover);
  box-shadow: 0 0 18px rgba(140,80,255,.25); color: var(--c-text);
}
#volBtn svg { width: 20px; height: 20px; }
#volBtn.active {
  background: rgba(100,40,170,.5); border-color: var(--c-border-hover);
  box-shadow: 0 0 18px rgba(140,80,255,.25); color: var(--c-text);
}

/* volume panel */
#vol-panel {
  position: fixed; top: 72px; left: 18px; z-index: 201;
  background: rgba(14,6,34,.88);
  backdrop-filter: blur(18px); -webkit-backdrop-filter: blur(18px);
  border: 1px solid var(--c-border); border-radius: 16px;
  padding: 14px 12px 10px;
  display: flex; flex-direction: column; align-items: center; gap: 10px;
  animation: volIn 160ms cubic-bezier(.16,1,.3,1);
}
#vol-panel.hidden { display: none; }
@keyframes volIn {
  from { opacity: 0; transform: translateY(-8px) scale(.95); }
  to   { opacity: 1; transform: translateY(0)    scale(1); }
}

#vol-pct {
  font-family: 'Outfit', sans-serif; font-size: 11px; font-weight: 600;
  color: var(--c-accent2); letter-spacing: .5px;
  min-width: 34px; text-align: center;
}

/* vertical range slider */
#vol-range {
  -webkit-appearance: slider-vertical;
  writing-mode: vertical-lr;
  direction: rtl;
  width: 22px; height: 88px;
  background: transparent;
  cursor: pointer; outline: none; border: none;
}
#vol-range::-webkit-slider-runnable-track {
  width: 4px; border-radius: 2px;
  background: rgba(255,255,255,.12);
}
#vol-range::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 14px; height: 14px; border-radius: 50%; margin-left: -5px;
  background: var(--c-accent2);
  box-shadow: 0 0 10px rgba(192,132,252,.65);
  transition: transform 150ms ease, box-shadow 150ms ease;
}
#vol-range::-webkit-slider-thumb:hover {
  transform: scale(1.2);
  box-shadow: 0 0 16px rgba(192,132,252,.9);
}
#vol-range::-moz-range-track {
  width: 4px; border-radius: 2px;
  background: rgba(255,255,255,.12);
}
#vol-range::-moz-range-thumb {
  width: 14px; height: 14px; border-radius: 50%; border: none;
  background: var(--c-accent2);
  box-shadow: 0 0 10px rgba(192,132,252,.65);
}
#vol-range:focus-visible { outline: 2px solid var(--c-accent); outline-offset: 4px; }

/* ── MAIN WRAPPER ───────────────────────────────────── */
#wrap {
  position: relative; z-index: 10;
  width: 100%; max-width: 460px;
  padding: 10px 20px 108px;
  animation: wrapIn .85s cubic-bezier(.16,1,.3,1) forwards;
  opacity: 0;
}
@keyframes wrapIn {
  from { opacity: 0; transform: translateY(28px) scale(.975); }
  to   { opacity: 1; transform: translateY(0)    scale(1); }
}

/* ── PROFILE CARD ───────────────────────────────────── */
.card {
  background: var(--c-card);
  backdrop-filter: blur(var(--blur)); -webkit-backdrop-filter: blur(var(--blur));
  border: 1px solid var(--c-border);
  border-radius: 26px;
  padding: 24px 28px 22px;
  position: relative; overflow: hidden;
  box-shadow:
    0 30px 60px rgba(0,0,0,.55),
    0 0 0 1px rgba(255,255,255,.04) inset,
    0 1px 0 rgba(255,255,255,.08) inset;
}
.card::before {
  content: '';
  position: absolute; top: 0; left: 0; right: 0; height: 1px;
  background: linear-gradient(90deg, transparent 0%, rgba(190,140,255,.5) 50%, transparent 100%);
}
.card::after {
  content: '';
  position: absolute; inset: -1px; border-radius: 27px;
  background: linear-gradient(135deg, rgba(160,100,255,.12), rgba(100,80,220,.08), transparent 60%);
  pointer-events: none; z-index: -1;
}

/* ── CLOCK ──────────────────────────────────────────── */
.card-clock {
  position: absolute; top: 18px; right: 22px;
  font-family: 'Outfit', monospace; font-size: 11px; font-weight: 500;
  color: var(--c-dim); letter-spacing: 1.5px; opacity: .7;
}

/* ── AVATAR ─────────────────────────────────────────── */
.av-ring {
  display: flex; justify-content: center; margin-bottom: 12px;
}
.av-outer {
  position: relative; width: 82px; height: 82px;
}
.av-glow {
  position: absolute; inset: -6px; border-radius: 50%; z-index: 0;
  background: conic-gradient(from 0deg, #9d67ff, #c084fc, #818cf8, #9d67ff);
  animation: spin 5s linear infinite; filter: blur(2px); opacity: .7;
}
@keyframes spin { to { transform: rotate(360deg); } }
.av-inner {
  position: absolute; inset: 3px; border-radius: 50%; z-index: 1;
  background: linear-gradient(135deg, #4c1d95, #312e81);
  display: flex; align-items: center; justify-content: center;
  font-family: 'Outfit', sans-serif; font-size: 28px; font-weight: 700;
  color: #fff; overflow: hidden;
  box-shadow: 0 0 0 2px var(--c-bg);
}
#avImg {
  position: absolute; inset: 0;
  width: 100%; height: 100%;
  object-fit: cover; border-radius: 50%;
  z-index: 1;
}

.status-dot {
  position: absolute; bottom: 4px; right: 4px; z-index: 2;
  width: 14px; height: 14px; border-radius: 50%;
  background: #22c55e; border: 2px solid var(--c-bg);
  box-shadow: 0 0 6px rgba(34,197,94,.6);
  animation: pulse 2.5s ease-in-out infinite;
}
@keyframes pulse {
  0%,100% { box-shadow: 0 0 6px rgba(34,197,94,.6); }
  50%      { box-shadow: 0 0 14px rgba(34,197,94,.9); }
}

/* ── USERNAME + BIO ─────────────────────────────────── */
.username {
  font-family: 'Outfit', sans-serif; font-size: 26px; font-weight: 700;
  text-align: center; letter-spacing: -.6px; margin-bottom: 4px;
  color: var(--c-text);
  text-shadow: 0 0 40px rgba(180,130,255,.5), 0 2px 12px rgba(0,0,0,.4);
}
.bio {
  text-align: center; font-size: 13px; font-weight: 400;
  color: var(--c-dim); letter-spacing: .6px; margin-bottom: 14px;
  text-transform: uppercase; min-height: 18px;
}

/* ── ANILIST STATS ───────────────────────────────────── */
.ani-stats {
  display: flex; align-items: stretch; justify-content: center;
  margin-bottom: 14px;
  background: rgba(2,169,255,.06);
  border: 1px solid rgba(2,169,255,.16);
  border-radius: 13px; padding: 9px 8px;
  opacity: 0; transition: opacity .45s ease;
}
.ani-stats.loaded { opacity: 1; }
.ani-stat {
  display: flex; flex-direction: column; align-items: center; gap: 3px; flex: 1;
}
.ani-val {
  font-family: 'Outfit', sans-serif; font-size: 16px; font-weight: 700;
  color: var(--c-text);
}
.ani-lbl {
  font-size: 9px; font-weight: 600; text-transform: uppercase;
  letter-spacing: .9px; color: var(--c-dim);
}
.ani-div {
  width: 1px; background: rgba(180,140,255,.14); margin: 4px 0; flex-shrink: 0;
}

/* ── SPOTIFY NOW PLAYING ─────────────────────────────── */
.sp-now {
  display: none; align-items: center; gap: 11px;
  padding: 8px 12px; margin-bottom: 12px;
  background: rgba(29,185,84,.07);
  border: 1px solid rgba(29,185,84,.18);
  border-radius: 13px; overflow: hidden;
}
.sp-now.visible { display: flex; }
.sp-eq {
  display: flex; gap: 2px; align-items: flex-end;
  height: 14px; flex-shrink: 0;
}
.sp-eq span {
  width: 3px; border-radius: 1.5px; background: #1db954;
  animation: eqBounce .8s ease-in-out infinite;
}
.sp-eq span:nth-child(1) { height: 6px;  animation-delay: 0s; }
.sp-eq span:nth-child(2) { height: 14px; animation-delay: .18s; }
.sp-eq span:nth-child(3) { height: 9px;  animation-delay: .36s; }
@keyframes eqBounce {
  0%,100% { transform: scaleY(.5); }
  50%      { transform: scaleY(1.1); }
}
.sp-ico svg { width: 20px; height: 20px; flex-shrink: 0; }
.sp-info { flex: 1; min-width: 0; }
.sp-lbl {
  font-size: 9px; font-weight: 700; letter-spacing: 1.5px;
  color: #1db954; margin-bottom: 2px;
}
.sp-track {
  font-family: 'Outfit', sans-serif; font-size: 13px; font-weight: 600;
  color: var(--c-text); white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.sp-artist { font-size: 11px; color: var(--c-dim); margin-top: 1px; }

/* ── LINKS ──────────────────────────────────────────── */
.links { display: flex; flex-direction: column; gap: 7px; }

.lnk {
  display: flex; align-items: center; gap: 14px;
  padding: 10px 14px;
  background: rgba(255,255,255,.04);
  border: 1px solid rgba(180,140,255,.12);
  border-radius: 15px; text-decoration: none;
  color: var(--c-text); cursor: pointer;
  transition: transform 200ms ease, border-color 200ms ease,
              background 200ms ease, box-shadow 200ms ease,
              opacity 0.45s ease;
  position: relative; overflow: hidden;
  opacity: 0;
}
.lnk::before {
  content: ''; position: absolute; inset: 0;
  background: linear-gradient(135deg, rgba(140,80,255,.09), rgba(100,80,220,.05));
  opacity: 0; transition: opacity 200ms ease;
}
.lnk.revealed { opacity: 1; }
.lnk:hover {
  transform: translateX(5px);
  border-color: rgba(180,140,255,.30);
  background: rgba(255,255,255,.065);
  box-shadow: 0 4px 24px rgba(0,0,0,.35), -4px 0 0 rgba(140,80,255,.35);
}
.lnk:hover::before { opacity: 1; }
.lnk:focus-visible { outline: 2px solid var(--c-accent); outline-offset: 2px; }

.lnk-ico {
  width: 38px; height: 38px; border-radius: 11px; flex-shrink: 0;
  display: flex; align-items: center; justify-content: center;
  position: relative; z-index: 1;
}
.lnk-ico svg { width: 19px; height: 19px; }
.ico-discord { background: rgba(88,101,242,.22); }
.ico-anilist { background: rgba(2,169,255,.18); }
.ico-spotify { background: rgba(29,185,84,.18); }
.ico-steam   { background: rgba(102,192,244,.15); }

.lnk-txt { flex: 1; position: relative; z-index: 1; }
.lnk-name {
  font-family: 'Outfit', sans-serif; font-size: 15px; font-weight: 600;
  color: var(--c-text);
}
.lnk-sub { font-size: 12px; color: var(--c-dim); margin-top: 1px; }

.lnk-arr {
  color: var(--c-dim); position: relative; z-index: 1;
  transition: transform 200ms ease, color 200ms ease;
}
.lnk:hover .lnk-arr { transform: translateX(4px); color: var(--c-accent2); }
.lnk-arr svg { width: 15px; height: 15px; }

/* ── VISITOR COUNT ───────────────────────────────────── */
.visit-count {
  display: none; align-items: center; justify-content: center;
  gap: 5px; margin-top: 18px;
  font-size: 11px; color: var(--c-dim); opacity: .6;
}
.visit-count.visible { display: flex; }

/* ── MUSIC PLAYER ───────────────────────────────────── */
#player {
  position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
  width: calc(100% - 40px); max-width: 440px;
  background: rgba(18,8,40,.78);
  backdrop-filter: blur(24px); -webkit-backdrop-filter: blur(24px);
  border: 1px solid var(--c-border); border-radius: 20px;
  padding: 14px 16px; z-index: 200;
  box-shadow: 0 12px 48px rgba(0,0,0,.65), 0 0 0 1px rgba(255,255,255,.04) inset;
  animation: playerIn 1s cubic-bezier(.16,1,.3,1) .25s forwards;
  opacity: 0;
}
@keyframes playerIn {
  from { opacity: 0; transform: translateX(-50%) translateY(22px); }
  to   { opacity: 1; transform: translateX(-50%) translateY(0); }
}

.pl-row { display: flex; align-items: center; gap: 13px; }

.pl-art {
  width: 50px; height: 50px; border-radius: 12px; flex-shrink: 0;
  background: linear-gradient(135deg, #3b1074, #1e3a8a);
  position: relative; overflow: hidden;
  box-shadow: 0 4px 14px rgba(0,0,0,.45);
  animation: artSpin linear infinite 12s paused;
}
.pl-art.spinning { animation-play-state: running; }
@keyframes artSpin {
  to { box-shadow: 0 4px 14px rgba(0,0,0,.45), 0 0 20px rgba(140,80,255,.3); }
}
.pl-art::after {
  content: ''; position: absolute; inset: 0; z-index: 2;
  background: linear-gradient(135deg, rgba(255,255,255,.08) 0%, transparent 60%);
  pointer-events: none;
}
#plCover {
  position: absolute; inset: 0; width: 100%; height: 100%;
  object-fit: cover; border-radius: 12px; z-index: 1;
}
.pl-art-icon {
  position: absolute; inset: 0; z-index: 1;
  display: flex; align-items: center; justify-content: center;
  color: rgba(255,255,255,.45);
}
.pl-art-icon svg { width: 24px; height: 24px; }

.pl-info { flex: 1; min-width: 0; }
.pl-title {
  font-family: 'Outfit', sans-serif; font-size: 14px; font-weight: 600;
  color: var(--c-text); white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.pl-artist { font-size: 11px; color: var(--c-dim); margin-top: 2px; }

.pl-prog { display: flex; align-items: center; gap: 6px; margin-top: 7px; }
.pl-time { font-size: 10px; color: var(--c-dim); font-variant-numeric: tabular-nums; white-space: nowrap; }
.pl-bar {
  flex: 1; height: 3px; background: rgba(255,255,255,.1);
  border-radius: 2px; cursor: pointer; position: relative; overflow: hidden;
}
.pl-fill {
  position: absolute; left: 0; top: 0; height: 100%; border-radius: 2px;
  background: linear-gradient(90deg, #7c3aed, #c084fc);
  transition: width 1s linear;
}

.pl-ctrls { display: flex; align-items: center; gap: 6px; flex-shrink: 0; }
.c-btn {
  width: 32px; height: 32px; border-radius: 9px; border: none;
  background: transparent; color: var(--c-muted); cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  transition: background 150ms, color 150ms;
}
.c-btn:hover { background: rgba(255,255,255,.09); color: var(--c-text); }
.c-btn:focus-visible { outline: 2px solid var(--c-accent); outline-offset: 2px; }
.c-btn.play {
  width: 38px; height: 38px; border-radius: 11px;
  background: rgba(130,60,240,.3); color: var(--c-text);
}
.c-btn.play:hover {
  background: rgba(140,70,255,.5);
  box-shadow: 0 0 18px rgba(130,60,240,.35);
}
.c-btn svg { width: 16px; height: 16px; }
.c-btn.play svg { width: 18px; height: 18px; }

/* ── RESPONSIVE ─────────────────────────────────────── */
@media (max-width: 480px) {
  #wrap { padding: 8px 12px 108px; }
  .card { padding: 20px 18px 18px; }
}

/* Très petits écrans : réduction globale par scale */
@media (max-height: 680px) {
  #wrap { transform: scale(0.88); transform-origin: center center; }
}
@media (max-height: 580px) {
  #wrap { transform: scale(0.78); transform-origin: center center; }
}

/* ── REDUCED MOTION ─────────────────────────────────── */
@media (prefers-reduced-motion: reduce) {
  .orb-a,.orb-b,.orb-c,.pt,#bg,.av-glow { animation: none; }
  #wrap, #player { animation: none; opacity: 1; }
  .status-dot { animation: none; }
  .sp-eq span { animation: none; }
}

/* ── CUSTOM CURSOR ───────────────────────────────────── */
@media (pointer: fine) {
  * { cursor: none !important; }

  #cur-dot {
    position: fixed; z-index: 9999; pointer-events: none;
    width: 9px; height: 9px; border-radius: 50%;
    background: #c084fc;
    box-shadow: 0 0 12px rgba(192,132,252,.9), 0 0 5px #c084fc;
    transform: translate(-50%, -50%);
    transition: width 180ms ease, height 180ms ease,
                background 180ms ease, box-shadow 180ms ease;
    will-change: left, top;
  }
  #cur-ring {
    position: fixed; z-index: 9998; pointer-events: none;
    width: 34px; height: 34px; border-radius: 50%;
    border: 1.5px solid rgba(180,130,255,.45);
    transform: translate(-50%, -50%);
    transition: width 260ms ease, height 260ms ease,
                border-color 260ms ease, background 260ms ease;
    will-change: left, top;
  }

  body.cur-hov #cur-dot {
    width: 13px; height: 13px;
    background: #fff;
    box-shadow: 0 0 18px rgba(210,170,255,.9), 0 0 6px #fff;
  }
  body.cur-hov #cur-ring {
    width: 48px; height: 48px;
    border-color: rgba(180,130,255,.75);
    background: rgba(140,80,255,.07);
  }

  body.cur-clk #cur-dot  { transform: translate(-50%,-50%) scale(.6); }
  body.cur-clk #cur-ring { transform: translate(-50%,-50%) scale(.82); }

  .cur-sp {
    position: fixed; z-index: 9999; pointer-events: none;
    width: 5px; height: 5px; border-radius: 50%;
    transform: translate(-50%, -50%);
    animation: spBurst .55s ease-out forwards;
  }
  @keyframes spBurst {
    0%   { transform: translate(-50%,-50%) translate(0,0) scale(1.2); opacity: 1; }
    100% { transform: translate(-50%,-50%) translate(var(--tx),var(--ty)) scale(0); opacity: 0; }
  }

  .cur-trail {
    position: fixed; z-index: 9996; pointer-events: none;
    border-radius: 50%; transform: translate(-50%,-50%);
    background: rgba(192,132,252,.35);
    animation: trailFade .55s ease-out forwards;
  }
  @keyframes trailFade {
    0%   { opacity: .5; transform: translate(-50%,-50%) scale(1); }
    100% { opacity: 0;  transform: translate(-50%,-50%) scale(0); }
  }
}
